<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="Images/favicon.png"
    />
    <script src="https://cdn.tailwindcss.com"></script>

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="Images/favicon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="Images/favicon.png"
    />
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="Images/favicon.png"
    />
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
      rel="stylesheet"
    />
    <link rel="icon" href="Images/favicon.png" type="image/png" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/CSS/index.css" />
    <style>
      .get-btn {
  padding: 10px 20px;
  background-color: #1f5a21;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bolder;
  margin-top: 20px;
  text-align: center;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
}
.btn-container {
  text-align: center;
}
.container {
  background-color: rgb(7, 7, 33);
  color: white;
  font-weight: bolder;
  padding: 20px;
  display: none;
  border-radius: 5px;
  text-align: center;
}
.main {
  background-color: rgba(17, 49, 96, 0.979);
  color: white;
  font-weight: bolder;
  padding: 20px;
  display: none;
  border-radius: 5px;
  margin: 20px auto;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
  max-width: 80%;
}

.option-btn {
  transition: background 0.2s, color 0.2s;
}
.option-btn.correct {
  background: #22c55e !important;
  color: #fff !important;
}
.option-btn.wrong {
  background: #ef4444 !important;
  color: #fff !important;
}
.option-btn.disabled {
  pointer-events: none;
  opacity: 0.7;
}
.fade-in {
  animation: fadeIn 0.5s;
}
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
.quiz-arena {
  display: flex;
  justify-content: center;
  margin-top: 30px;
  margin-bottom: 30px;
  /* background-color: rgba(17, 49, 96, 0.979); */
  width: fit-content;
  padding: 40px;
  margin: 20px auto;
  border-radius: 10px;
}
.quiz-card {
  /* background-color: rgb(7, 7, 33); */
  box-shadow: 5px 5px 10px 0 rgba(0, 0, 0, 0.7);
}
#quiz-section {
  margin-top: 20px;
}
#quizs {
  color: black;
}

.fade-in {
  animation: fadeIn 0.5s;
}
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
.btn {
  transition: background 0.2s, color 0.2s;
}
.btn-correct {
  background: #22c55e !important;
  color: #fff !important;
}
.btn-wrong {
  background: #ef4444 !important;
  color: #fff !important;
}
.btn.disabled {
  pointer-events: none;
  opacity: 0.7;
}
.leaderboard-row {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem 0;
}
.leaderboard-row:nth-child(odd) {
  background: #f3f4f6;
}
.leaderboard-row:nth-child(even) {
  background: #e0e7ff;
}
.guess-challenge {
  padding: 20px;
  margin: 0 auto;
  display: flex;
  justify-content: center;
}
.guessz-game {
  box-shadow: 5px 5px 10px 0 rgba(0, 0, 0, 0.7);
}

/*  */

/* body {
  margin: 0;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background-color: #1e1e1e;
  color: #ffffff;
  display: flex;
  flex-direction: column;
  height: 100vh;
} */
header {
  /* padding: 1rem; */
  /* background: #111; */
  text-align: center;
  /* font-size: 1.5rem; */
  font-weight: bold;
  letter-spacing: 1px;
}

.toolbar {
  display: flex;
  gap: 10px;
  padding: 0.75rem 1rem;
  background: #222;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 20px;
  background: #000;
}
.toolbar button,
.toolbar select {
  background: #333;
  color: #fff;
  border: 1px solid #555;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s ease;
}
.toolbar button:hover,
.toolbar select:hover {
  background: #444;
  border-color: #777;
}
.toolbar select {
  appearance: none;
  background: #333
    url("data:image/svg+xml;charset=UTF-8,%3Csvg fill='white' height='12' viewBox='0 0 24 24' width='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E")
    no-repeat right 10px center;
  padding-right: 2rem;
}
.jokesz {
  margin-top: 30px;
}
.editor-container {
  display: flex;
  flex: 1;
  overflow: hidden;
}
.editor {
  flex: 1;
  display: flex;
  flex-direction: column;
  text-align: center;
  font-weight: bolder;
}
textarea {
  flex: 1;
  padding: 1rem;
  /* background: #2d2d2d; */
  background: #000;
  color: white;
  border: none;
  resize: none;
  font-family: monospace;
  font-size: 1rem;
  border-top: 1px solid #444;
  border: 5px solid green;
  height: 35px;
  font-weight: lighter;
}
iframe {
  flex: 1;
  border: none;
  background: #fff;
}
.output-container {
  flex: 1;
  display: flex;
  flex-direction: column;
}
.error {
  background: #ff4c4c;
  color: white;
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  display: none;
}
.light-theme body {
  background-color: #ffffff;
  color: #000;
  border: 2px solid green;
  border-radius: 5px;
}
.light-theme textarea {
  background: #f4f4f4;
  color: #000;
}
.live-code-editor {
  margin-top: 30px;
  background-color: #000;
  color: white;
  margin-bottom: 20px;
  padding: 20px;
}
.run-code {
  background-color: green;
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  border: none;
  border-radius: 5px;
}

/* @media (max-width: 800px) {
  #mobile-menu {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
  }
} */

    </style>

    <header>
      <!-- Tailwind CSS and Font Awesome -->

      <div data-aos="fade-right" ...><!-- your logo --></div>

      <!-- Navbar -->
      <nav
        id="navbar"
        class="fixed top-0 left-0 w-full z-50 backdrop-blur bg-slate-900/80 text-white shadow-md transition-all duration-500"
      >
        <div
          class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between"
        >
          <!-- Logo -->
          <div class="flex items-center space-x-2">
            <img
              src="Images/favicon.png"
              alt="BranCodeX Logo"
              class="h-8 w-8 logo"
            />
            <a href="index.html" class="play-logo"
              ><span class="font-bold text-xl tracking-wide"
                ><span class="bran">Bran</span><span class="code">Code</span
                ><span class="x">X</span></span
              ></a
            >
          </div>

          <!-- Desktop Links -->
          <div class="hidden md:flex items-center space-x-8">
            <a href="index.html" class="nav-link hover:text-blue-400 transition"
              >Home</a
            >
            <a
              href="index.html#about"
              class="nav-link hover:text-blue-400 transition"
              >About</a
            >
            <a
              href="index.html#services"
              class="nav-link hover:text-blue-400 transition"
              >Services</a
            >
            <a
              href="index.html#skills"
              class="nav-link hover:text-blue-400 transition"
              >Skills</a
            >
            <a
              href="index.html#projects"
              class="nav-link hover:text-blue-400 transition"
              >Projects</a
            >
            <a
              href="index.html#testimonials"
              class="nav-link hover:text-blue-400 transition"
              >Testimonials</a
            >
            <a
              href="playground.html"
              class="nav-link hover:text-blue-400 transition"
              >Playground</a
            >
            <a
              href="faq.html#faqs"
              class="nav-link hover:text-blue-400 transition"
              >FAQ's</a
            >
            <a
              href="index.html#contact"
              class="nav-link hover:text-blue-400 transition"
              >Contact</a
            >
          </div>

          <!-- Dark Mode Toggle + Hire Me -->
          <div class="hidden md:flex items-center space-x-4">
            <button
              id="theme-toggle"
              class="text-xl hover:text-yellow-400 transition"
            >
              <i id="theme-icon" class="fas fa-moon"></i>
            </button>
            <a
              href="index.html#contact"
              class="px-4 py-2 bg-blue-500 hover:bg-blue-600 transition rounded-full text-sm font-semibold shadow"
            >
              Hire Me
            </a>
          </div>

          <!-- Hamburger -->
          <div class="md:hidden">
            <button id="menu-btn" class="text-white focus:outline-none">
              <i class="fas fa-bars text-2xl"></i>
            </button>
          </div>
        </div>

        <!-- Mobile Menu -->

        <div
          id="mobile-menu"
          class="hidden md:hidden px-6 pb-4 space-y-2 bg-slate-900"
        >
          <a
            href="index.html"
            class="block text-sm nav-link hover:text-blue-400"
            >Home</a
          >
          <a
            href="index.html#about"
            class="block text-sm nav-link hover:text-blue-400"
            >About</a
          >
          <a
            href="index.html#services"
            class="block text-sm nav-link hover:text-blue-400"
            >Services</a
          >
          <a
            href="index.html#skills"
            class="block text-sm nav-link hover:text-blue-400"
            >Skills</a
          >
          <a
            href="index.html#projects"
            class="block text-sm nav-link hover:text-blue-400"
            >Projects</a
          >
          <a
            href="index.html#testimonials"
            class="block text-sm nav-link hover:text-blue-400"
            >Testimonials</a
          >
          <a
            href="playground.html"
            class="block text-sm nav-link hover:text-blue-400"
            >Playground</a
          >
          <a
            href="faq.html#faq"
            class="block text-sm nav-link hover:text-blue-400"
            >FAQ's</a
          >
          <a
            href="index.html#contact"
            class="block text-sm nav-link hover:text-blue-400"
            >Contact</a
          >
          <div class="flex items-center gap-4 pt-2">
            <button
              id="theme-toggle-mob"
              class="text-xl hover:text-yellow-400 transition"
            >
              <i id="theme-icon-mob" class="fas fa-moon"></i>
            </button>
            <a
              href="index.html#contact"
              class="inline-block px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-full text-sm font-semibold text-white"
            >
              Hire Me
            </a>
          </div>
        </div>
      </nav>
    </header>
  </head>
  <body>
    <section
      class="bg-gradient-to-br from-[#1e3a8a] to-[#0f172a] text-white py-24 px-6"
      id="playground-home"
    >
      <div class="max-w-6xl mx-auto text-center" data-aos="fade-down">
        <h1 class="text-5xl font-extrabold mb-6">
          Welcome to the BranCodeX Playground 🧠
        </h1>
        <p
          class="text-lg md:text-xl max-w-4xl mx-auto text-gray-300 leading-relaxed"
        >
          Step into a world of interactive coding fun! Test your skills with
          quizzes, build your brain with challenges, laugh with tech jokes, or
          play with live code — it’s all here waiting for you.
        </p>
      </div>
    </section>

    <section
      id="random-jokes"
      class="py-12 bg-gradient-to-r from-indigo-900 via-purple-900 to-indigo-900 text-white text-center jokesz"
    >
      <div class="max-w-3xl mx-auto px-4">
        <h2 class="text-4xl md:text-5xl font-extrabold mb-4 animate-bounce">
          404 - Seriousness Not Found 🤡
        </h2>
        <p class="text-lg md:text-xl font-light text-gray-300">
          Lighten up your day with some random, and friendly jokes. click the
          button below for more belly laughs!
        </p>
      </div>
    </section>

    <section id="random-joke">
      <div class="main">
        <div class="container"></div>
      </div>

      <div class="btn-container">
        <button class="get-btn">Get Randon Joke</button>
      </div>
    </section>

    <section
      id="quiz-section"
      class="bg-gradient-to-r from-purple-900 via-indigo-900 to-purple-900 text-white py-12 text-center"
    >
      <div class="max-w-3xl mx-auto px-6">
        <h2
          class="text-4xl md:text-5xl font-extrabold mb-4 tracking-wide animate-pulse"
        >
          🌍 Knowledge Quest
        </h2>
        <p class="text-lg md:text-xl text-gray-300 font-light">
          Challenge your mind with fun, brainy, and rewarding quizzes. Let’s get
          started!
        </p>
      </div>
    </section>

    <section class="quiz-arena">
      <div
        class="bg-white bg-opacity-90 rounded-xl shadow-2xl p-8 max-w-xl w-full fade-in quiz-card"
      >
        <div id="quiz-header" class="mb-6 text-center">
          <h1 class="text-3xl font-extrabold text-indigo-700 mb-2">
            🎮 Ultimate Interactive Quiz
          </h1>
          <p class="text-lg text-gray-700" id="quizs">
            Test your knowledge across Computers, General Knowledge, World
            History, Riddles, Politics, Gadgets, Sports, and Cameroon History!
          </p>
        </div>
        <div id="quiz-setup" class="mb-6 text-center">
          <input
            id="playerName"
            type="text"
            placeholder="Enter your name"
            class="border p-2 rounded w-2/3 mb-4"
          />
          <button
            id="startBtn"
            class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded font-bold transition"
          >
            Start Quiz
          </button>
        </div>
        <div id="quiz-main" class="hidden">
          <div class="flex justify-between items-center mb-4">
            <div>
              <span class="font-bold text-indigo-700">Player:</span>
              <span id="playerDisplay"></span>
            </div>
            <div>
              <span class="font-bold text-indigo-700">High Score:</span>
              <span id="highScore"></span>
            </div>
          </div>
          <div class="flex justify-between items-center mb-2">
            <div>
              <span class="font-bold text-green-600">Passed:</span>
              <span id="passedCount">0</span>
              <span class="font-bold text-red-600 ml-4">Failed:</span>
              <span id="failedCount">0</span>
            </div>
            <div>
              <span class="font-bold text-indigo-700">Q:</span>
              <span id="currentQ">1</span>/<span id="totalQ">20</span>
            </div>
            <div>
              <span class="font-bold text-pink-600">⏰</span>
              <span id="timer">30</span>s
            </div>
          </div>
          <div
            id="questionBox"
            class="bg-indigo-100 rounded-lg p-4 mb-4 shadow"
          >
            <h2
              id="question"
              class="text-xl font-semibold text-indigo-900"
            ></h2>
          </div>
          <div id="options" class="grid gap-3 mb-4"></div>
          <div id="explanation" class="italic text-gray-700 mb-4 hidden"></div>
          <div class="flex justify-between">
            <button
              id="restartBtn"
              class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded font-bold transition"
            >
              Restart
            </button>
            <button
              id="quitBtn"
              class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded font-bold transition"
            >
              Quit
            </button>
            <button
              id="nextBtn"
              class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-bold transition"
            >
              Next
            </button>
          </div>
        </div>
        <div id="quiz-result" class="hidden text-center">
          <h2 class="text-2xl font-bold text-indigo-700 mb-2">
            🏁 Quiz Complete!
          </h2>
          <p id="resultMsg" class="text-lg mb-2"></p>
          <p class="mb-2">
            <span class="font-bold text-green-600">Passed:</span>
            <span id="finalPassed"></span> |
            <span class="font-bold text-red-600">Failed:</span>
            <span id="finalFailed"></span>
          </p>
          <p class="mb-4">
            <span class="font-bold text-indigo-700">High Score:</span>
            <span id="finalHighScore"></span>
          </p>
          <button
            id="playAgainBtn1"
            class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded font-bold transition"
          >
            Play Again
          </button>
        </div>
      </div>
      <audio
        id="sound-correct"
        src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_20fe5d7b46.mp3?filename=correct-2-46134.mp3"
      ></audio>
      <audio
        id="sound-wrong"
        src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_fce676bfd6.mp3?filename=wrong-2-46134.mp3"
      ></audio>
      <audio
        id="sound-next"
        src="https://cdn.pixabay.com/download/audio/2022/02/23/audio_838a6e7cf0.mp3?filename=page-flip-2-37166.mp3"
      ></audio>
    </section>

    <section
      id="combo-game"
      class="bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white py-14 text-center shadow-xl"
    >
      <div class="max-w-4xl mx-auto px-6">
        <h2
          class="text-4xl md:text-5xl font-extrabold mb-4 tracking-wide animate-bounce"
        >
          🎮 Logic Meets Geography
        </h2>
        <p class="text-lg md:text-xl font-light text-gray-300">
          Test your luck with numbers and sharpen your mind with capital &
          currency challenges. Are you ready to conquer both worlds?
        </p>
      </div>
    </section>

    <section class="guess-challenge">
      <div
        class="bg-white bg-opacity-95 rounded-xl shadow-2xl p-8 max-w-2xl w-full fade-in guessz-game"
      >
        <div id="game-header" class="mb-6 text-center">
          <h1 class="text-3xl font-extrabold text-indigo-700 mb-2">
            🎲 Guess & Challenge 🌍
          </h1>
          <p class="text-lg text-gray-700">
            Test your luck and knowledge! Guess odd/even, then conquer the
            Capitals & Currencies Challenge!
          </p>
        </div>
        <div id="leaderboard-section" class="mb-6">
          <h2 class="text-xl font-bold text-indigo-700 mb-2">🏆 Leaderboard</h2>
          <div id="leaderboard" class="rounded bg-indigo-50 p-2 mb-2"></div>
          <div class="flex justify-between text-sm text-gray-600">
            <span>High Score: <span id="highScore">0</span></span>
            <span>Player: <span id="playerNameDisplay"></span></span>
          </div>
        </div>
        <div id="setup-section" class="mb-6 text-center">
          <input
            id="playerName"
            type="text"
            placeholder="Enter your name"
            class="border p-2 rounded w-2/3 mb-4"
          />
          <button
            id="startBtn1"
            class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded font-bold transition"
          >
            Start Game
          </button>
        </div>
        <div id="guess-section" class="hidden">
          <h2 class="text-xl font-bold text-indigo-700 mb-2">
            Guess: Odd or Even?
          </h2>
          <div class="mb-2 text-gray-700">
            Round <span id="guessRound">1</span> of 5
          </div>
          <div class="flex justify-center gap-6 mb-4">
            <button
              id="oddBtn"
              class="btn bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded font-bold transition"
            >
              Odd
            </button>
            <button
              id="evenBtn"
              class="btn bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded font-bold transition"
            >
              Even
            </button>
          </div>
          <div id="guessResult" class="text-lg mb-2"></div>
          <div id="guessStreak" class="text-sm text-indigo-700 mb-2"></div>
          <button
            id="toChallengeBtn"
            class="hidden bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded font-bold transition"
          >
            Go to Challenge
          </button>
        </div>
        <div id="challenge-section" class="hidden">
          <h2 class="text-xl font-bold text-indigo-700 mb-2">
            🌍 Capital & Currency Challenge
          </h2>
          <div id="challengeInfo" class="mb-2 text-gray-700"></div>
          <div id="continentSelectDiv" class="mb-2 hidden">
            <label for="continentSelect" class="font-semibold"
              >Choose a continent:</label
            >
            <select id="continentSelect" class="border p-2 rounded ml-2">
              <option value="Africa">Africa</option>
              <option value="Americas">Americas</option>
              <option value="Asia">Asia</option>
              <option value="Europe">Europe</option>
              <option value="Oceania">Oceania</option>
            </select>
            <button
              id="continentGoBtn"
              class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1 rounded font-bold transition ml-2"
            >
              Go
            </button>
          </div>
          <div id="challengeTimer" class="mb-2 text-pink-700 font-bold"></div>
          <div id="challengeQ" class="mb-4"></div>
          <div id="challengeInputs" class="mb-2"></div>
          <div
            id="challengeHint"
            class="mb-2 text-yellow-700 font-semibold"
          ></div>
          <button
            id="submitChallengeBtn"
            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-bold transition mb-2"
          >
            Submit
          </button>
          <div id="challengeResult" class="mb-2"></div>
          <button
            id="nextChallengeBtn"
            class="hidden bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded font-bold transition"
          >
            Next
          </button>
        </div>
        <div id="final-section" class="hidden text-center">
          <h2 class="text-2xl font-bold text-indigo-700 mb-2">🎉 Game Over!</h2>
          <div id="finalScore" class="text-lg mb-2"></div>
          <button
            id="playAgainBtn"
            class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded font-bold transition"
          >
            Play Again
          </button>
        </div>
      </div>
      <audio
        id="sound-correct"
        src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_20fe5d7b46.mp3?filename=correct-2-46134.mp3"
      ></audio>
      <audio
        id="sound-wrong"
        src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_fce676bfd6.mp3?filename=wrong-2-46134.mp3"
      ></audio>
      <audio
        id="sound-next"
        src="https://cdn.pixabay.com/download/audio/2022/02/23/audio_838a6e7cf0.mp3?filename=page-flip-2-37166.mp3"
      ></audio>
    </section>

    <section class="live-code-editor">
      <header>
        <h2 class="text-4xl md:text-5xl font-bold text-center mb-4 livesz">
          ✨ Live Code Playground
        </h2>
        <p
          class="text-center text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-10"
        >
          Write, test, and preview your HTML, CSS & JavaScript in real-time. No
          limits. No rules. Just pure creativity — in one elegant space.
        </p>
      </header>
    </section>
    <div class="toolbar">
      <button onclick="resetCode()">Reset</button>
      <button onclick="saveCode()">Save My Work</button>
      <button onclick="downloadCode()">Download ZIP</button>
      <button onclick="toggleFullscreen()">Toggle Fullscreen</button>
      <select onchange="loadTemplate(this.value)">
        <option value="">Load Template</option>
        <option value="hello">Hello World</option>
        <option value="grid">CSS Grid</option>
      </select>
      <button onclick="toggleTheme()">Switch Theme</button>
    </div>
    <div class="editor-container">
      <div class="editor">
        <label>HTML</label>
        <textarea id="html"></textarea>
        <label>CSS</label>
        <textarea id="css"></textarea>
        <label>JavaScript</label>
        <textarea id="js"></textarea>
      </div>
      <div class="output-container">
        <div id="error" class="error"></div>
        <iframe id="preview"></iframe>
      </div>
    </div>
    <button class="run-code">▶ Run code</button>

    <footer class="footer-section" data-aos="fade-up">
      <div class="footer-container">
        <div class="footer-brand">
          <a href="index.html"
            ><h3>
              <img src="Images/favicon.png" width="35" /><span
                class="font-bold text-xl tracking-wide"
                ><span class="bran">Bran</span><span class="code">Code</span
                ><span class="x">X</span></span
              >
            </h3></a
          >
          <p>Crafting Interactive Experiences with Passion & Precision.</p>
        </div>

        <div class="footer-links">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="index.html#hero">Home</a></li>
            <li><a href="index.html#about">About</a></li>
            <li><a href="index.html#services">Services</a></li>
            <li><a href="index.html#skills">Skills</a></li>
            <li><a href="index.html#projects">Projects</a></li>
            <li><a href="faq.html">FAQ's</a></li>
            <li><a href="playground.html">Playground</a></li>
            <li><a href="index.html#contact">Contact</a></li>
          </ul>
        </div>

        <div class="footer-social">
          <h4>Follow Me</h4>
          <div class="social-icons">
            <a href="https://wa.link/fhyxfh" target="_blank"
              ><i class="fab fa-whatsapp"></i
            ></a>
            <a href="mailto:bengc102@gmail.com"
              ><i class="fas fa-envelope"></i
            ></a>
            <a href="https://wa.link/fhyxfh" target="_blank"
              ><i class="fab fa-x"></i
            ></a>
            <a
              href="https://www.linkedin.com/in/beng-brandon-338382291?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app"
              target="_blank"
              ><i class="fab fa-linkedin-in"></i
            ></a>
            <a href="https://github.com/Bengche" target="_blank"
              ><i class="fab fa-github"></i
            ></a>
            <a
              href="https://www.facebook.com/bengbrandonche?mibextid=ZbWKwL"
              target="_blank"
              ><i class="fab fa-facebook-f"></i
            ></a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>
          &copy; <span id="year"></span> Beng Brandon Che | All Rights Reserved.
        </p>
      </div>
    </footer>
    <script>
      const menuBtn = document.getElementById("menu-btn");
      const mobileMenu = document.getElementById("mobile-menu");
      menuBtn.addEventListener("click", () =>
        mobileMenu.classList.toggle("hidden")
      );
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init({
        once: true, // only animate once
        duration: 1000, // animation duration
      });
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://kit.fontawesome.com/yourkitid.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>

    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

    <!-- Setup and start animation! -->
    <script>
      const typed = new Typed("#element", {
        strings: [
          `Hi, I'm <span class="text-blue-400">Beng Brandon Che</span><br />
        Welcome to <span class="text-yellow-300">BranCodeX</span>
      </h1><h3 class="text-lg md:text-xl font-light italic text-gray-300">
        From pixels to perfection - I craft websites that work, wow, and win.
      </h3>`,
        ],
        typeSpeed: 100,
      });
    </script>

    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init({
        once: true, // only animate once
        duration: 1000, // animation duration
      });
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://kit.fontawesome.com/yourkitid.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script src="/JAVASCRIPT/index.js"></script>

    <script src="/JAVASCRIPT/index.js"></script>
    <script>
      const main = document.querySelector(".main");
const container = document.querySelector(".container");
const getBtn = document.querySelector(".get-btn");

const getJoke = function () {
  fetch("https://official-joke-api.appspot.com/random_joke")
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      console.log(data);
      main.style.display = "block";
      container.style.display = "block";
      container.innerHTML = `<h3>${data.setup}</h3><p>${data.punchline}</P>`;
    })
    .catch(function (error) {
      main.style.display = "block";
      container.style.display = "block";

      container.innerHTML =
        "There are no random jokes at the moment, please try again in a few minutes";
    });
};
getBtn.addEventListener("click", getJoke);

// End of jokes.js

// start of quiz.js

// --- CATEGORY IDS ---
const categories = [
  { name: "Science: Computers", id: 18, api: true },
  { name: "General Knowledge", id: 9, api: true },
  { name: "World History", id: 23, api: true },
  { name: "Riddles", id: null, api: false },
  { name: "Politics", id: 24, api: true },
  { name: "Science: Gadgets", id: 30, api: true },
  { name: "Sports", id: 21, api: true },
  { name: "Cameroon History", id: null, api: false },
];
const QUESTIONS_PER_CATEGORY = 20;
const TOTAL_QUESTIONS = 20;
const DIFFICULTY = "easy";

// --- CUSTOM QUESTIONS: Cameroon History (50 unique) ---
const cameroonHistoryQuestions = [
  {
    categoryName: "Cameroon History",
    question: "When did Cameroon gain independence from France?",
    correct_answer: "1960",
    incorrect_answers: ["1958", "1961", "1962"],
  },
  {
    categoryName: "Cameroon History",
    question: "What is the capital city of Cameroon?",
    correct_answer: "Yaoundé",
    incorrect_answers: ["Douala", "Bamenda", "Garoua"],
  },
  {
    categoryName: "Cameroon History",
    question: "Who was the first President of Cameroon?",
    correct_answer: "Ahmadou Ahidjo",
    incorrect_answers: ["Paul Biya", "John Fru Ndi", "Manu Dibango"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which river forms part of the border between Cameroon and Nigeria?",
    correct_answer: "Cross River",
    incorrect_answers: ["Sanaga River", "Benue River", "Logone River"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which year did Cameroon join the United Nations?",
    correct_answer: "1960",
    incorrect_answers: ["1955", "1961", "1972"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which is the largest city in Cameroon?",
    correct_answer: "Douala",
    incorrect_answers: ["Yaoundé", "Bafoussam", "Bamenda"],
  },
  {
    categoryName: "Cameroon History",
    question: "What is the official language of Cameroon?",
    correct_answer: "French and English",
    incorrect_answers: ["French only", "English only", "Pidgin"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which mountain is the highest in Cameroon?",
    correct_answer: "Mount Cameroon",
    incorrect_answers: ["Mount Fako", "Mount Manengouba", "Mount Oku"],
  },
  {
    categoryName: "Cameroon History",
    question: "Who is the current President of Cameroon (as of 2024)?",
    correct_answer: "Paul Biya",
    incorrect_answers: ["Ahmadou Ahidjo", "John Fru Ndi", "Samuel Eto'o"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which ocean borders Cameroon to the southwest?",
    correct_answer: "Atlantic Ocean",
    incorrect_answers: ["Indian Ocean", "Pacific Ocean", "Mediterranean Sea"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which country colonized Cameroon after World War I?",
    correct_answer: "France and Britain",
    incorrect_answers: ["Germany", "Belgium", "Portugal"],
  },
  {
    categoryName: "Cameroon History",
    question: "What is the currency of Cameroon?",
    correct_answer: "Central African CFA franc",
    incorrect_answers: ["West African CFA franc", "Naira", "Dollar"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian footballer is known as 'The Indomitable Lion'?",
    correct_answer: "Roger Milla",
    incorrect_answers: ["Samuel Eto'o", "Rigobert Song", "Patrick Mboma"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which region is famous for the Bamileke people?",
    correct_answer: "West Region",
    incorrect_answers: ["North Region", "Southwest Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian city is known for its port and economic activities?",
    correct_answer: "Douala",
    incorrect_answers: ["Yaoundé", "Buea", "Ngaoundéré"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which year did Cameroon host the African Cup of Nations for the first time?",
    correct_answer: "1972",
    incorrect_answers: ["1984", "2000", "2019"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian lake is known for a deadly gas eruption in 1986?",
    correct_answer: "Lake Nyos",
    incorrect_answers: ["Lake Chad", "Lake Barombi Mbo", "Lake Oku"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which is the oldest university in Cameroon?",
    correct_answer: "University of Yaoundé",
    incorrect_answers: [
      "University of Douala",
      "University of Buea",
      "University of Bamenda",
    ],
  },
  {
    categoryName: "Cameroon History",
    question: "What is the nickname of Cameroon’s national football team?",
    correct_answer: "The Indomitable Lions",
    incorrect_answers: ["The Super Eagles", "The Black Stars", "The Elephants"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian city is known as the 'Town of Legendary Hospitality'?",
    correct_answer: "Buea",
    incorrect_answers: ["Bamenda", "Garoua", "Maroua"],
  },
  // 30 more unique questions:
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is called the 'Economic Capital'?",
    correct_answer: "Douala",
    incorrect_answers: ["Yaoundé", "Bafoussam", "Bamenda"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which country did Cameroon defeat to win their first AFCON title?",
    correct_answer: "Nigeria",
    incorrect_answers: ["Egypt", "Ghana", "Ivory Coast"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian is a famous jazz saxophonist?",
    correct_answer: "Manu Dibango",
    incorrect_answers: ["Richard Bona", "Francis Bebey", "Charlotte Dipanda"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which region is Limbe located in?",
    correct_answer: "Southwest Region",
    incorrect_answers: ["Northwest Region", "Littoral Region", "West Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is known for the 'Ngondo' festival?",
    correct_answer: "Douala",
    incorrect_answers: ["Yaoundé", "Bamenda", "Buea"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian footballer won the Olympic gold medal in 2000?",
    correct_answer: "Samuel Eto'o",
    incorrect_answers: ["Roger Milla", "Rigobert Song", "Patrick Mboma"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which is the largest region in Cameroon by area?",
    correct_answer: "East Region",
    incorrect_answers: ["North Region", "West Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is famous for tea plantations?",
    correct_answer: "Tiko",
    incorrect_answers: ["Buea", "Bamenda", "Garoua"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian river is the longest?",
    correct_answer: "Sanaga River",
    incorrect_answers: ["Wouri River", "Benue River", "Cross River"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian city is known for the 'FENAC' cultural festival?",
    correct_answer: "Yaoundé",
    incorrect_answers: ["Douala", "Bamenda", "Buea"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Mandara Mountains?",
    correct_answer: "Far North Region",
    incorrect_answers: ["North Region", "West Region", "East Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the North Region?",
    correct_answer: "Garoua",
    incorrect_answers: ["Ngaoundéré", "Maroua", "Bamenda"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the Adamawa Region?",
    correct_answer: "Ngaoundéré",
    incorrect_answers: ["Garoua", "Bamenda", "Buea"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is famous for the Tikar people?",
    correct_answer: "Adamawa Region",
    incorrect_answers: ["West Region", "North Region", "Southwest Region"],
  },
  {
    categoryName: "Cameroon History",
    question:
      "Which Cameroonian city is known for the 'Mount Cameroon Race of Hope'?",
    correct_answer: "Buea",
    incorrect_answers: ["Bamenda", "Yaoundé", "Douala"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is the least populated?",
    correct_answer: "East Region",
    incorrect_answers: ["North Region", "West Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the Northwest Region?",
    correct_answer: "Bamenda",
    incorrect_answers: ["Buea", "Yaoundé", "Douala"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Bakossi people?",
    correct_answer: "Southwest Region",
    incorrect_answers: ["Northwest Region", "West Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the West Region?",
    correct_answer: "Bafoussam",
    incorrect_answers: ["Bamenda", "Buea", "Douala"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the South Region?",
    correct_answer: "Ebolowa",
    incorrect_answers: ["Buea", "Bamenda", "Garoua"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Beti people?",
    correct_answer: "Central Region",
    incorrect_answers: ["West Region", "North Region", "East Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the Central Region?",
    correct_answer: "Yaoundé",
    incorrect_answers: ["Douala", "Bafoussam", "Bamenda"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Baka pygmies?",
    correct_answer: "East Region",
    incorrect_answers: ["North Region", "West Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the Far North Region?",
    correct_answer: "Maroua",
    incorrect_answers: ["Garoua", "Ngaoundéré", "Bamenda"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Fulani people?",
    correct_answer: "Adamawa Region",
    incorrect_answers: ["West Region", "North Region", "Southwest Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the Littoral Region?",
    correct_answer: "Douala",
    incorrect_answers: ["Yaoundé", "Bafoussam", "Bamenda"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Bamoun people?",
    correct_answer: "West Region",
    incorrect_answers: ["North Region", "Southwest Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the Southwest Region?",
    correct_answer: "Buea",
    incorrect_answers: ["Bamenda", "Yaoundé", "Douala"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian region is known for the Maka people?",
    correct_answer: "East Region",
    incorrect_answers: ["North Region", "West Region", "Littoral Region"],
  },
  {
    categoryName: "Cameroon History",
    question: "Which Cameroonian city is the capital of the East Region?",
    correct_answer: "Bertoua",
    incorrect_answers: ["Buea", "Bamenda", "Garoua"],
  },
];

// --- RIDDLES (custom, 20 unique) ---
const riddlesQuestions = [
  {
    categoryName: "Riddles",
    question: "What has keys but can't open locks?",
    correct_answer: "A piano",
    incorrect_answers: ["A map", "A lock", "A door"],
  },
  {
    categoryName: "Riddles",
    question: "What gets wetter as it dries?",
    correct_answer: "A towel",
    incorrect_answers: ["A sponge", "A river", "A soap"],
  },
  {
    categoryName: "Riddles",
    question: "What has a head and a tail but no body?",
    correct_answer: "A coin",
    incorrect_answers: ["A snake", "A comet", "A worm"],
  },
  {
    categoryName: "Riddles",
    question: "What belongs to you but others use it more than you do?",
    correct_answer: "Your name",
    incorrect_answers: ["Your phone", "Your car", "Your house"],
  },
  {
    categoryName: "Riddles",
    question: "What can travel around the world while staying in a corner?",
    correct_answer: "A stamp",
    incorrect_answers: ["A coin", "A shadow", "A clock"],
  },
  {
    categoryName: "Riddles",
    question: "What has one eye but cannot see?",
    correct_answer: "A needle",
    incorrect_answers: ["A storm", "A hurricane", "A potato"],
  },
  {
    categoryName: "Riddles",
    question: "What has many teeth but cannot bite?",
    correct_answer: "A comb",
    incorrect_answers: ["A saw", "A zipper", "A rake"],
  },
  {
    categoryName: "Riddles",
    question: "What is always in front of you but can’t be seen?",
    correct_answer: "The future",
    incorrect_answers: ["The air", "Your nose", "The wind"],
  },
  {
    categoryName: "Riddles",
    question: "What goes up but never comes down?",
    correct_answer: "Your age",
    incorrect_answers: ["A balloon", "A rocket", "A mountain"],
  },
  {
    categoryName: "Riddles",
    question: "What has hands but can’t clap?",
    correct_answer: "A clock",
    incorrect_answers: ["A monkey", "A statue", "A robot"],
  },
  {
    categoryName: "Riddles",
    question: "What can you catch but not throw?",
    correct_answer: "A cold",
    incorrect_answers: ["A ball", "A fish", "A butterfly"],
  },
  {
    categoryName: "Riddles",
    question: "What kind of band never plays music?",
    correct_answer: "A rubber band",
    incorrect_answers: ["A jazz band", "A rock band", "A marching band"],
  },
  {
    categoryName: "Riddles",
    question: "What has a neck but no head?",
    correct_answer: "A bottle",
    incorrect_answers: ["A guitar", "A shirt", "A vase"],
  },
  {
    categoryName: "Riddles",
    question: "What has an eye but cannot see?",
    correct_answer: "A needle",
    incorrect_answers: ["A hurricane", "A potato", "A tornado"],
  },
  {
    categoryName: "Riddles",
    question: "What has a thumb and four fingers but is not alive?",
    correct_answer: "A glove",
    incorrect_answers: ["A hand", "A sock", "A mitten"],
  },
  {
    categoryName: "Riddles",
    question: "What has a heart that doesn’t beat?",
    correct_answer: "An artichoke",
    incorrect_answers: ["A stone", "A robot", "A tree"],
  },
  {
    categoryName: "Riddles",
    question:
      "What comes once in a minute, twice in a moment, but never in a thousand years?",
    correct_answer: "The letter M",
    incorrect_answers: ["The letter N", "The letter E", "The letter T"],
  },
  {
    categoryName: "Riddles",
    question:
      "What has cities, but no houses; forests, but no trees; and water, but no fish?",
    correct_answer: "A map",
    incorrect_answers: ["A globe", "A book", "A painting"],
  },
  {
    categoryName: "Riddles",
    question: "What is full of holes but still holds water?",
    correct_answer: "A sponge",
    incorrect_answers: ["A net", "A bucket", "A pipe"],
  },
  {
    categoryName: "Riddles",
    question: "What question can you never answer yes to?",
    correct_answer: "Are you asleep?",
    incorrect_answers: ["Are you hungry?", "Are you awake?", "Are you ready?"],
  },
];

// --- DOM ELEMENTS ---
const quizSetup = document.getElementById("quiz-setup");
const quizMain = document.getElementById("quiz-main");
const quizResult = document.getElementById("quiz-result");
const playerDisplay = document.getElementById("playerDisplay");
const highScoreSpan1 = document.getElementById("highScore");
const passedCount = document.getElementById("passedCount");
const failedCount = document.getElementById("failedCount");
const currentQ = document.getElementById("currentQ");
const totalQ = document.getElementById("totalQ");
const timerSpan = document.getElementById("timer");
const questionBox = document.getElementById("questionBox");
const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const explanationEl = document.getElementById("explanation");
const nextBtn = document.getElementById("nextBtn");
const restartBtn = document.getElementById("restartBtn");
const quitBtn = document.getElementById("quitBtn");
const startBtn = document.getElementById("startBtn");
const playerNameInput1 = document.getElementById("playerName");
const resultMsg = document.getElementById("resultMsg");
const finalPassed = document.getElementById("finalPassed");
const finalFailed = document.getElementById("finalFailed");
const finalHighScore = document.getElementById("finalHighScore");
const playAgainBtn1 = document.getElementById("playAgainBtn1");

// --- STATE ---
let questions = [];
let currentIndex = 0;
let score = 0;
let failed = 0;
let passed = 0;
let timer = null;
let timeLeft = 30;
let playerName1 = "";
let highScore1 = localStorage.getItem("quizHighScore") || 0;

// --- UTILS ---
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
function decodeHTML(html) {
  const txt = document.createElement("textarea");
  txt.innerHTML = html;
  return txt.value;
}
function playSound(id) {
  const audio = document.getElementById(id);
  if (audio) {
    audio.currentTime = 0;
    audio.play();
  }
}

// --- FETCH QUESTIONS ---
async function fetchQuestions() {
  let allQuestions = [];
  for (const cat of categories) {
    if (cat.api && cat.id) {
      const url = `https://opentdb.com/api.php?amount=${QUESTIONS_PER_CATEGORY}&category=${cat.id}&difficulty=${DIFFICULTY}&type=multiple`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data.results && data.results.length > 0) {
          allQuestions = allQuestions.concat(
            data.results.map((q) => ({
              ...q,
              categoryName: cat.name,
            }))
          );
        }
      } catch (e) {
        // If fetch fails, skip this category
      }
    } else if (cat.name === "Cameroon History") {
      allQuestions = allQuestions.concat(cameroonHistoryQuestions);
    } else if (cat.name === "Riddles") {
      allQuestions = allQuestions.concat(riddlesQuestions);
    }
  }
  // Remove duplicates by question text
  const seen = new Set();
  allQuestions = allQuestions.filter((q) => {
    const key = (q.categoryName || "") + decodeHTML(q.question);
    if (seen.has(key)) return false;
    seen.add(key);
    return true;
  });
  // Shuffle and pick only TOTAL_QUESTIONS
  return shuffle(allQuestions).slice(0, TOTAL_QUESTIONS);
}

// --- QUIZ LOGIC ---
function resetQuiz() {
  currentIndex = 0;
  score = 0;
  failed = 0;
  passed = 0;
  questions = [];
  timeLeft = 30;
  passedCount.textContent = "0";
  failedCount.textContent = "0";
  currentQ.textContent = "1";
  totalQ.textContent = TOTAL_QUESTIONS;
  timerSpan.textContent = "30";
  explanationEl.classList.add("hidden");
  explanationEl.textContent = "";
  optionsEl.innerHTML = "";
  questionEl.textContent = "";
}

async function startQuiz() {
  playerName1 = playerNameInput1.value.trim() || "Player";
  quizSetup.classList.add("hidden");
  quizMain.classList.remove("hidden");
  quizResult.classList.add("hidden");
  playerDisplay.textContent = playerName1;
  highScoreSpan1.textContent = highScore1;
  resetQuiz();
  questions = await fetchQuestions();
  if (!questions.length) {
    questionEl.textContent =
      "Sorry, could not load questions. Please try again.";
    optionsEl.innerHTML = "";
    nextBtn.disabled = true;
    return;
  }
  showQuestion();
}

function showQuestion() {
  clearInterval(timer);
  timeLeft = 30;
  timerSpan.textContent = timeLeft;
  explanationEl.classList.add("hidden");
  explanationEl.textContent = "";
  optionsEl.innerHTML = "";
  if (currentIndex >= questions.length) {
    return endQuiz();
  }
  const q = questions[currentIndex];
  questionEl.innerHTML = `<span class="text-indigo-700 font-bold">${decodeHTML(
    q.categoryName
  )}</span>: ${decodeHTML(q.question)}`;
  const answers = shuffle([q.correct_answer, ...q.incorrect_answers]);
  answers.forEach((ans) => {
    const btn = document.createElement("button");
    btn.className =
      "option-btn w-full text-left px-4 py-2 rounded-lg border border-indigo-300 bg-white text-indigo-900 font-semibold shadow hover:bg-indigo-200 transition";
    btn.innerHTML = decodeHTML(ans);
    btn.onclick = () => selectAnswer(btn, ans, q.correct_answer, q);
    optionsEl.appendChild(btn);
  });
  currentQ.textContent = currentIndex + 1;
  nextBtn.disabled = true;
  startTimer(q);
}

function startTimer(q) {
  timerSpan.textContent = timeLeft;
  timer = setInterval(() => {
    timeLeft--;
    timerSpan.textContent = timeLeft;
    if (timeLeft <= 0) {
      clearInterval(timer);
      autoFail(q);
    }
  }, 1000);
}

function selectAnswer(btn, selected, correct, q) {
  clearInterval(timer);
  const allBtns = document.querySelectorAll(".option-btn");
  allBtns.forEach((b) => b.classList.add("disabled"));
  if (decodeHTML(selected) === decodeHTML(correct)) {
    btn.classList.add("correct");
    score++;
    passed++;
    playSound("sound-correct");
    explanationEl.textContent = `✅ Correct!`;
  } else {
    btn.classList.add("wrong");
    allBtns.forEach((b) => {
      if (b.innerHTML === decodeHTML(correct)) b.classList.add("correct");
    });
    failed++;
    playSound("sound-wrong");
    explanationEl.textContent = `❌ Wrong! The correct answer is: ${decodeHTML(
      correct
    )}`;
  }
  explanationEl.classList.remove("hidden");
  passedCount.textContent = passed;
  failedCount.textContent = failed;
  nextBtn.disabled = false;
}

function autoFail(q) {
  const allBtns = document.querySelectorAll(".option-btn");
  allBtns.forEach((b) => {
    b.classList.add("disabled");
    if (b.innerHTML === decodeHTML(q.correct_answer))
      b.classList.add("correct");
  });
  failed++;
  failedCount.textContent = failed;
  playSound("sound-wrong");
  explanationEl.textContent = `⏰ Time's up! The correct answer is: ${decodeHTML(
    q.correct_answer
  )}`;
  explanationEl.classList.remove("hidden");
  nextBtn.disabled = false;
}

function nextQuestion() {
  playSound("sound-next");
  currentIndex++;
  showQuestion();
}

function endQuiz() {
  quizMain.classList.add("hidden");
  quizResult.classList.remove("hidden");
  resultMsg.textContent = `${playerName1}, you scored ${score} out of ${TOTAL_QUESTIONS}!`;
  finalPassed.textContent = passed;
  finalFailed.textContent = failed;
  if (score > highScore1) {
    highScore1 = score;
    localStorage.setItem("quizHighScore", highScore1);
  }
  finalHighScore.textContent = highScore1;
}

function quitQuiz() {
  quizMain.classList.add("hidden");
  quizSetup.classList.remove("hidden");
  playerNameInput1.value = "";
}

// --- EVENT LISTENERS ---
startBtn.onclick = startQuiz;
nextBtn.onclick = nextQuestion;
restartBtn.onclick = () => {
  resetQuiz();
  startQuiz();
};
quitBtn.onclick = quitQuiz;
playAgainBtn1.onclick = () => {
  quizResult.classList.add("hidden");
  quizSetup.classList.remove("hidden");
  playerNameInput1.value = "";
};
// End of quiz.js

// start of quiz-game.js

// --- State ---
// let playerName = "";
// let guessRound = 1;
// let guessStreak = 0;
// let guessResults = [];
// let challengeCountries = [];
// let challengeIndex = 0;
// let challengeScore = 0;
// let challengeTimer = null;
// let challengeTimeLeft = 0;
// let challengeMaxTime = 30; // default, will be set per round
// let challengePoints = 2;
// let challengeHints = true;
// let challengeContinent = null;
// let challengeCountriesPool = [];
// let leaderboard = JSON.parse(
//   localStorage.getItem("guessChallengeLeaderboard") || "[]"
// );
// let highScore = localStorage.getItem("guessChallengeHighScore") || 0;
// let allCountries = null; // cache

// // --- Static fallback data (in case API fails) ---
// const staticCountries = [
//   {
//     name: { common: "France" },
//     capital: ["Paris"],
//     currencies: { EUR: { name: "Euro" } },
//     flags: { png: "https://flagcdn.com/w320/fr.png" },
//     region: "Europe",
//   },
//   {
//     name: { common: "Nigeria" },
//     capital: ["Abuja"],
//     currencies: { NGN: { name: "Nigerian naira" } },
//     flags: { png: "https://flagcdn.com/w320/ng.png" },
//     region: "Africa",
//   },
//   {
//     name: { common: "Brazil" },
//     capital: ["Brasília"],
//     currencies: { BRL: { name: "Brazilian real" } },
//     flags: { png: "https://flagcdn.com/w320/br.png" },
//     region: "Americas",
//   },
//   {
//     name: { common: "Japan" },
//     capital: ["Tokyo"],
//     currencies: { JPY: { name: "Japanese yen" } },
//     flags: { png: "https://flagcdn.com/w320/jp.png" },
//     region: "Asia",
//   },
//   {
//     name: { common: "Australia" },
//     capital: ["Canberra"],
//     currencies: { AUD: { name: "Australian dollar" } },
//     flags: { png: "https://flagcdn.com/w320/au.png" },
//     region: "Oceania",
//   },
//   {
//     name: { common: "Canada" },
//     capital: ["Ottawa"],
//     currencies: { CAD: { name: "Canadian dollar" } },
//     flags: { png: "https://flagcdn.com/w320/ca.png" },
//     region: "Americas",
//   },
//   {
//     name: { common: "Egypt" },
//     capital: ["Cairo"],
//     currencies: { EGP: { name: "Egyptian pound" } },
//     flags: { png: "https://flagcdn.com/w320/eg.png" },
//     region: "Africa",
//   },
//   {
//     name: { common: "India" },
//     capital: ["New Delhi"],
//     currencies: { INR: { name: "Indian rupee" } },
//     flags: { png: "https://flagcdn.com/w320/in.png" },
//     region: "Asia",
//   },
//   {
//     name: { common: "Germany" },
//     capital: ["Berlin"],
//     currencies: { EUR: { name: "Euro" } },
//     flags: { png: "https://flagcdn.com/w320/de.png" },
//     region: "Europe",
//   },
//   {
//     name: { common: "South Africa" },
//     capital: ["Pretoria"],
//     currencies: { ZAR: { name: "South African rand" } },
//     flags: { png: "https://flagcdn.com/w320/za.png" },
//     region: "Africa",
//   },
//   {
//     name: { common: "Argentina" },
//     capital: ["Buenos Aires"],
//     currencies: { ARS: { name: "Argentine peso" } },
//     flags: { png: "https://flagcdn.com/w320/ar.png" },
//     region: "Americas",
//   },
//   {
//     name: { common: "China" },
//     capital: ["Beijing"],
//     currencies: { CNY: { name: "Chinese yuan" } },
//     flags: { png: "https://flagcdn.com/w320/cn.png" },
//     region: "Asia",
//   },
//   {
//     name: { common: "Italy" },
//     capital: ["Rome"],
//     currencies: { EUR: { name: "Euro" } },
//     flags: { png: "https://flagcdn.com/w320/it.png" },
//     region: "Europe",
//   },
//   {
//     name: { common: "New Zealand" },
//     capital: ["Wellington"],
//     currencies: { NZD: { name: "New Zealand dollar" } },
//     flags: { png: "https://flagcdn.com/w320/nz.png" },
//     region: "Oceania",
//   },
//   {
//     name: { common: "Russia" },
//     capital: ["Moscow"],
//     currencies: { RUB: { name: "Russian ruble" } },
//     flags: { png: "https://flagcdn.com/w320/ru.png" },
//     region: "Europe",
//   },
//   {
//     name: { common: "Mexico" },
//     capital: ["Mexico City"],
//     currencies: { MXN: { name: "Mexican peso" } },
//     flags: { png: "https://flagcdn.com/w320/mx.png" },
//     region: "Americas",
//   },
//   {
//     name: { common: "Kenya" },
//     capital: ["Nairobi"],
//     currencies: { KES: { name: "Kenyan shilling" } },
//     flags: { png: "https://flagcdn.com/w320/ke.png" },
//     region: "Africa",
//   },
//   {
//     name: { common: "Spain" },
//     capital: ["Madrid"],
//     currencies: { EUR: { name: "Euro" } },
//     flags: { png: "https://flagcdn.com/w320/es.png" },
//     region: "Europe",
//   },
//   {
//     name: { common: "Turkey" },
//     capital: ["Ankara"],
//     currencies: { TRY: { name: "Turkish lira" } },
//     flags: { png: "https://flagcdn.com/w320/tr.png" },
//     region: "Asia",
//   },
//   {
//     name: { common: "United Kingdom" },
//     capital: ["London"],
//     currencies: { GBP: { name: "Pound sterling" } },
//     flags: { png: "https://flagcdn.com/w320/gb.png" },
//     region: "Europe",
//   },
// ];

// // --- DOM Elements ---
// const setupSection = document.getElementById("setup-section");
// const guessSection = document.getElementById("guess-section");
// const challengeSection = document.getElementById("challenge-section");
// const finalSection = document.getElementById("final-section");
// const leaderboardDiv = document.getElementById("leaderboard");
// const highScoreSpan = document.getElementById("highScore");
// const playerNameDisplay = document.getElementById("playerNameDisplay");
// const playerNameInput = document.getElementById("playerName");
// const startBtn = document.getElementById("startBtn");
// const oddBtn = document.getElementById("oddBtn");
// const evenBtn = document.getElementById("evenBtn");
// const guessRoundSpan = document.getElementById("guessRound");
// const guessResultDiv = document.getElementById("guessResult");
// const guessStreakDiv = document.getElementById("guessStreak");
// const toChallengeBtn = document.getElementById("toChallengeBtn");
// const challengeInfo = document.getElementById("challengeInfo");
// const continentSelectDiv = document.getElementById("continentSelectDiv");
// const continentSelect = document.getElementById("continentSelect");
// const continentGoBtn = document.getElementById("continentGoBtn");
// const challengeTimerDiv = document.getElementById("challengeTimer");
// const challengeQ = document.getElementById("challengeQ");
// const challengeInputs = document.getElementById("challengeInputs");
// const challengeHint = document.getElementById("challengeHint");
// const submitChallengeBtn = document.getElementById("submitChallengeBtn");
// const challengeResult = document.getElementById("challengeResult");
// const nextChallengeBtn = document.getElementById("nextChallengeBtn");
// const finalScoreDiv = document.getElementById("finalScore");
// const playAgainBtn = document.getElementById("playAgainBtn");

// // --- Utility ---
// function playSound(id) {
//   const audio = document.getElementById(id);
//   if (audio) {
//     audio.currentTime = 0;
//     audio.play();
//   }
// }
// function shuffle(arr) {
//   for (let i = arr.length - 1; i > 0; i--) {
//     const j = Math.floor(Math.random() * (i + 1));
//     [arr[i], arr[j]] = [arr[j], arr[i]];
//   }
//   return arr;
// }
// function updateLeaderboard() {
//   leaderboardDiv.innerHTML = "";
//   const sorted = leaderboard
//     .slice()
//     .sort((a, b) => b.score - a.score)
//     .slice(0, 5);
//   sorted.forEach((entry, idx) => {
//     leaderboardDiv.innerHTML += `<div class="leaderboard-row"><span>${
//       idx + 1
//     }. ${entry.name}</span><span>${entry.score}</span></div>`;
//   });
//   highScoreSpan.textContent = highScore;
// }
// function saveLeaderboard(name, score) {
//   leaderboard.push({ name, score });
//   leaderboard = leaderboard.sort((a, b) => b.score - a.score).slice(0, 10);
//   localStorage.setItem(
//     "guessChallengeLeaderboard",
//     JSON.stringify(leaderboard)
//   );
//   if (score > highScore) {
//     highScore = score;
//     localStorage.setItem("guessChallengeHighScore", highScore);
//   }
//   updateLeaderboard();
// }

// // --- Game Logic ---
// function resetGame() {
//   guessRound = 1;
//   guessStreak = 0;
//   guessResults = [];
//   challengeCountries = [];
//   challengeIndex = 0;
//   challengeScore = 0;
//   challengeContinent = null;
//   challengeCountriesPool = [];
//   challengeHints = true;
//   challengePoints = 2;
//   challengeMaxTime = 30;
//   playerNameDisplay.textContent = playerName;
//   guessRoundSpan.textContent = guessRound;
//   guessResultDiv.textContent = "";
//   guessStreakDiv.textContent = "";
//   toChallengeBtn.classList.add("hidden");
//   challengeSection.classList.add("hidden");
//   finalSection.classList.add("hidden");
//   setupSection.classList.remove("hidden");
//   guessSection.classList.add("hidden");
//   updateLeaderboard();
// }

// function startGame() {
//   playerName = playerNameInput.value.trim() || "Player";
//   playerNameDisplay.textContent = playerName;
//   setupSection.classList.add("hidden");
//   guessSection.classList.remove("hidden");
//   guessRound = 1;
//   guessStreak = 0;
//   guessResults = [];
//   guessRoundSpan.textContent = guessRound;
//   guessResultDiv.textContent = "";
//   guessStreakDiv.textContent = "";
//   toChallengeBtn.classList.add("hidden");
//   updateLeaderboard();
// }

// function handleGuess(playerGuess) {
//   oddBtn.disabled = true;
//   evenBtn.disabled = true;
//   const computerNum = Math.floor(Math.random() * 100) + 1;
//   const isEven = computerNum % 2 === 0;
//   const correct =
//     (playerGuess === "even" && isEven) || (playerGuess === "odd" && !isEven);
//   guessResults.push(correct);
//   if (correct) {
//     guessStreak++;
//     playSound("sound-correct");
//     guessResultDiv.innerHTML = `<span class="btn btn-correct px-3 py-1 rounded">Correct! Computer chose <b>${computerNum}</b> (${
//       isEven ? "Even" : "Odd"
//     })</span>`;
//   } else {
//     guessStreak = 0;
//     playSound("sound-wrong");
//     guessResultDiv.innerHTML = `<span class="btn btn-wrong px-3 py-1 rounded">Wrong! Computer chose <b>${computerNum}</b> (${
//       isEven ? "Even" : "Odd"
//     })</span>`;
//   }
//   guessStreakDiv.textContent = `Current Streak: ${guessStreak}`;
//   setTimeout(() => {
//     oddBtn.disabled = false;
//     evenBtn.disabled = false;
//     if (guessRound < 5) {
//       guessRound++;
//       guessRoundSpan.textContent = guessRound;
//       guessResultDiv.textContent = "";
//     } else {
//       toChallengeBtn.classList.remove("hidden");
//       guessResultDiv.innerHTML += `<br><span class="font-bold text-indigo-700">Proceed to the Capital & Currency Challenge!</span>`;
//     }
//   }, 1200);
// }

// function goToChallenge() {
//   guessSection.classList.add("hidden");
//   challengeSection.classList.remove("hidden");
//   challengeCountries = [];
//   challengeIndex = 0;
//   challengeScore = 0;
//   challengeResult.textContent = "";
//   challengeHint.textContent = "";
//   challengeInputs.innerHTML = "";
//   challengeQ.innerHTML = "";
//   challengeTimerDiv.textContent = "";
//   nextChallengeBtn.classList.add("hidden");
//   submitChallengeBtn.disabled = false;

//   if (guessResults.length === 5 && guessResults.every(Boolean)) {
//     challengeHints = true;
//     challengePoints = 2;
//     challengeMaxTime = 30;
//     challengeInfo.innerHTML = `<span class="text-green-700 font-bold">You got a perfect streak! You get 30 seconds, hints, 2 points per answer, and can choose a continent.</span>`;
//     continentSelectDiv.classList.remove("hidden");
//   } else {
//     challengeHints = false;
//     challengePoints = 1;
//     challengeMaxTime = 20;
//     challengeInfo.innerHTML = `<span class="text-red-700 font-bold">No perfect streak. You get 20 seconds, no hints, 1 point per answer, and random countries.</span>`;
//     continentSelectDiv.classList.add("hidden");
//     challengeContinent = null;
//     fetchCountriesAndStartChallenge();
//   }
// }

// // Use countriesnow.space for capitals/currencies (no CORS issues, but limited data)
// function fetchCountriesAndStartChallenge() {
//   let url = "https://countriesnow.space/api/v0.1/countries/capital";
//   fetch(url)
//     .then((res) => res.json())
//     .then((data) => {
//       // This API returns {data: [{name, capital}], ...}
//       // We'll use staticCountries for currency, flag, region
//       let countries = data.data
//         .map((c) => {
//           let match = staticCountries.find(
//             (s) => s.name.common.toLowerCase() === c.name.toLowerCase()
//           );
//           return match
//             ? match
//             : {
//                 name: { common: c.name },
//                 capital: [c.capital || "Unknown"],
//                 currencies: { CUR: { name: "Unknown" } },
//                 flags: { png: "" },
//                 region: "Unknown",
//               };
//         })
//         .filter(
//           (c) =>
//             c.capital[0] !== "Unknown" &&
//             c.currencies &&
//             Object.values(c.currencies)[0].name !== "Unknown" &&
//             c.flags.png
//         );

//       if (challengeHints && challengeContinent) {
//         countries = countries.filter((c) => c.region === challengeContinent);
//       }
//       challengeCountriesPool = shuffle(
//         countries.length ? countries : staticCountries
//       );
//       challengeCountries = challengeCountriesPool.slice(0, 3);
//       challengeIndex = 0;
//       showChallengeQ();
//     })
//     .catch(() => {
//       // fallback to staticCountries
//       let countries = staticCountries;
//       if (challengeHints && challengeContinent) {
//         countries = countries.filter((c) => c.region === challengeContinent);
//       }
//       challengeCountriesPool = shuffle(countries);
//       challengeCountries = challengeCountriesPool.slice(0, 3);
//       challengeIndex = 0;
//       showChallengeQ();
//     });
// }

// function showChallengeQ() {
//   clearInterval(challengeTimer);
//   challengeResult.textContent = "";
//   challengeHint.textContent = "";
//   challengeInputs.innerHTML = "";
//   challengeQ.innerHTML = "";
//   if (challengeIndex >= challengeCountries.length) {
//     return endGame();
//   }
//   const country = challengeCountries[challengeIndex];
//   challengeQ.innerHTML = `
//         <div class="flex items-center gap-4 mb-2">
//           <img src="${country.flags.png}" alt="Flag" class="w-12 h-8 border rounded shadow"/>
//           <span class="font-bold text-indigo-700 text-lg">${country.name.common}</span>
//         </div>
//       `;
//   challengeInputs.innerHTML = `
//         <input id="capitalInput" type="text" placeholder="Capital" class="border p-2 rounded mb-2 w-full" autocomplete="off"/>
//         <input id="currencyInput" type="text" placeholder="Currency" class="border p-2 rounded mb-2 w-full" autocomplete="off"/>
//       `;
//   if (challengeHints) {
//     const capitalHint = country.capital[0].charAt(0);
//     const currencyHint = Object.values(country.currencies)[0].name.charAt(0);
//     challengeHint.innerHTML = `Hint: Capital starts with <b>${capitalHint}</b>, Currency starts with <b>${currencyHint}</b>`;
//   }
//   challengeTimeLeft = challengeMaxTime;
//   challengeTimerDiv.textContent = `⏰ ${challengeTimeLeft}s`;
//   challengeTimer = setInterval(() => {
//     challengeTimeLeft--;
//     challengeTimerDiv.textContent = `⏰ ${challengeTimeLeft}s`;
//     if (challengeTimeLeft <= 0) {
//       clearInterval(challengeTimer);
//       submitChallenge(true);
//     }
//   }, 1000);
// }

// function submitChallenge(timeout = false) {
//   clearInterval(challengeTimer);
//   submitChallengeBtn.disabled = true;
//   const country = challengeCountries[challengeIndex];
//   const capitalInput = document.getElementById("capitalInput")
//     ? document.getElementById("capitalInput").value.trim().toLowerCase()
//     : "";
//   const currencyInput = document.getElementById("currencyInput")
//     ? document.getElementById("currencyInput").value.trim().toLowerCase()
//     : "";
//   const correctCapital = country.capital[0].toLowerCase();
//   const correctCurrency = Object.values(
//     country.currencies
//   )[0].name.toLowerCase();
//   let resultHTML = "";

//   if (!timeout) {
//     if (capitalInput === correctCapital) {
//       challengeScore += challengePoints;
//       resultHTML += `<div class="btn btn-correct px-2 py-1 rounded mb-1">Capital: Correct!</div>`;
//       playSound("sound-correct");
//     } else {
//       resultHTML += `<div class="btn btn-wrong px-2 py-1 rounded mb-1">Capital: Wrong! Correct: <b>${country.capital[0]}</b></div>`;
//       playSound("sound-wrong");
//     }
//     if (currencyInput === correctCurrency) {
//       challengeScore += challengePoints;
//       resultHTML += `<div class="btn btn-correct px-2 py-1 rounded mb-1">Currency: Correct!</div>`;
//       playSound("sound-correct");
//     } else {
//       resultHTML += `<div class="btn btn-wrong px-2 py-1 rounded mb-1">Currency: Wrong! Correct: <b>${
//         Object.values(country.currencies)[0].name
//       }</b></div>`;
//       playSound("sound-wrong");
//     }
//   } else {
//     resultHTML += `<div class="btn btn-wrong px-2 py-1 rounded mb-1">Time's up!<br>Capital: <b>${
//       country.capital[0]
//     }</b>, Currency: <b>${Object.values(country.currencies)[0].name}</b></div>`;
//     playSound("sound-wrong");
//   }

//   challengeResult.innerHTML = `
//         ${resultHTML}
//         <div class="mt-2 flex items-center gap-2">
//           <img src="${
//             country.flags.png
//           }" alt="Flag" class="w-10 h-7 border rounded shadow"/>
//           <span class="font-bold">${country.name.common}</span>
//         </div>
//         <div>Capital: <b>${country.capital[0]}</b> | Currency: <b>${
//     Object.values(country.currencies)[0].name
//   }</b></div>
//       `;
//   nextChallengeBtn.classList.remove("hidden");
// }

// function nextChallenge() {
//   challengeIndex++;
//   submitChallengeBtn.disabled = false;
//   nextChallengeBtn.classList.add("hidden");
//   showChallengeQ();
// }

// function endGame() {
//   challengeSection.classList.add("hidden");
//   finalSection.classList.remove("hidden");
//   finalScoreDiv.innerHTML = `<span class="font-bold text-indigo-700">Final Score: ${challengeScore}</span>`;
//   saveLeaderboard(playerName, challengeScore);
// }

// // --- Event Listeners ---
// startBtn.onclick = () => {
//   resetGame();
//   startGame();
// };
// oddBtn.onclick = () => handleGuess("odd");
// evenBtn.onclick = () => handleGuess("even");
// toChallengeBtn.onclick = goToChallenge;
// continentGoBtn.onclick = () => {
//   challengeContinent = continentSelect.value;
//   continentSelectDiv.classList.add("hidden");
//   fetchCountriesAndStartChallenge();
// };
// submitChallengeBtn.onclick = () => submitChallenge(false);
// nextChallengeBtn.onclick = nextChallenge;
// playAgainBtn.onclick = () => {
//   resetGame();
//   startGame();
// };

// // --- Initial Setup ---
// resetGame();

// End of quiz-game.js

// --- State ---
let playerName = "";
let guessRound = 1;
let guessStreak = 0;
let guessResults = [];
let challengeCountries = [];
let challengeIndex = 0;
let challengeScore = 0;
let challengeTimer = null;
let challengeTimeLeft = 0;
let challengeMaxTime = 30; // default, will be set per round
let challengePoints = 2;
let challengeHints = true;
let challengeContinent = null;
let challengeCountriesPool = [];
let leaderboard = JSON.parse(
  localStorage.getItem("guessChallengeLeaderboard") || "[]"
);
let highScore = localStorage.getItem("guessChallengeHighScore") || 0;
let allCountries = null; // cache

// --- Static fallback data (in case API fails) ---
const staticCountries = [
  {
    name: { common: "France" },
    capital: ["Paris"],
    currencies: { EUR: { name: "Euro" } },
    flags: { png: "https://flagcdn.com/w320/fr.png" },
    region: "Europe",
  },
  {
    name: { common: "Nigeria" },
    capital: ["Abuja"],
    currencies: { NGN: { name: "Nigerian naira" } },
    flags: { png: "https://flagcdn.com/w320/ng.png" },
    region: "Africa",
  },
  {
    name: { common: "Brazil" },
    capital: ["Brasília"],
    currencies: { BRL: { name: "Brazilian real" } },
    flags: { png: "https://flagcdn.com/w320/br.png" },
    region: "Americas",
  },
  {
    name: { common: "Japan" },
    capital: ["Tokyo"],
    currencies: { JPY: { name: "Japanese yen" } },
    flags: { png: "https://flagcdn.com/w320/jp.png" },
    region: "Asia",
  },
  {
    name: { common: "Australia" },
    capital: ["Canberra"],
    currencies: { AUD: { name: "Australian dollar" } },
    flags: { png: "https://flagcdn.com/w320/au.png" },
    region: "Oceania",
  },
  {
    name: { common: "Canada" },
    capital: ["Ottawa"],
    currencies: { CAD: { name: "Canadian dollar" } },
    flags: { png: "https://flagcdn.com/w320/ca.png" },
    region: "Americas",
  },
  {
    name: { common: "Egypt" },
    capital: ["Cairo"],
    currencies: { EGP: { name: "Egyptian pound" } },
    flags: { png: "https://flagcdn.com/w320/eg.png" },
    region: "Africa",
  },
  {
    name: { common: "India" },
    capital: ["New Delhi"],
    currencies: { INR: { name: "Indian rupee" } },
    flags: { png: "https://flagcdn.com/w320/in.png" },
    region: "Asia",
  },
  {
    name: { common: "Germany" },
    capital: ["Berlin"],
    currencies: { EUR: { name: "Euro" } },
    flags: { png: "https://flagcdn.com/w320/de.png" },
    region: "Europe",
  },
  {
    name: { common: "South Africa" },
    capital: ["Pretoria"],
    currencies: { ZAR: { name: "South African rand" } },
    flags: { png: "https://flagcdn.com/w320/za.png" },
    region: "Africa",
  },
  {
    name: { common: "Argentina" },
    capital: ["Buenos Aires"],
    currencies: { ARS: { name: "Argentine peso" } },
    flags: { png: "https://flagcdn.com/w320/ar.png" },
    region: "Americas",
  },
  {
    name: { common: "China" },
    capital: ["Beijing"],
    currencies: { CNY: { name: "Chinese yuan" } },
    flags: { png: "https://flagcdn.com/w320/cn.png" },
    region: "Asia",
  },
  {
    name: { common: "Italy" },
    capital: ["Rome"],
    currencies: { EUR: { name: "Euro" } },
    flags: { png: "https://flagcdn.com/w320/it.png" },
    region: "Europe",
  },
  {
    name: { common: "New Zealand" },
    capital: ["Wellington"],
    currencies: { NZD: { name: "New Zealand dollar" } },
    flags: { png: "https://flagcdn.com/w320/nz.png" },
    region: "Oceania",
  },
  {
    name: { common: "Russia" },
    capital: ["Moscow"],
    currencies: { RUB: { name: "Russian ruble" } },
    flags: { png: "https://flagcdn.com/w320/ru.png" },
    region: "Europe",
  },
  {
    name: { common: "Mexico" },
    capital: ["Mexico City"],
    currencies: { MXN: { name: "Mexican peso" } },
    flags: { png: "https://flagcdn.com/w320/mx.png" },
    region: "Americas",
  },
  {
    name: { common: "Kenya" },
    capital: ["Nairobi"],
    currencies: { KES: { name: "Kenyan shilling" } },
    flags: { png: "https://flagcdn.com/w320/ke.png" },
    region: "Africa",
  },
  {
    name: { common: "Spain" },
    capital: ["Madrid"],
    currencies: { EUR: { name: "Euro" } },
    flags: { png: "https://flagcdn.com/w320/es.png" },
    region: "Europe",
  },
  {
    name: { common: "Turkey" },
    capital: ["Ankara"],
    currencies: { TRY: { name: "Turkish lira" } },
    flags: { png: "https://flagcdn.com/w320/tr.png" },
    region: "Asia",
  },
  {
    name: { common: "United Kingdom" },
    capital: ["London"],
    currencies: { GBP: { name: "Pound sterling" } },
    flags: { png: "https://flagcdn.com/w320/gb.png" },
    region: "Europe",
  },
];

// --- DOM Elements ---
const setupSection = document.getElementById("setup-section");
const guessSection = document.getElementById("guess-section");
const challengeSection = document.getElementById("challenge-section");
const finalSection = document.getElementById("final-section");
const leaderboardDiv = document.getElementById("leaderboard");
const highScoreSpan = document.getElementById("highScore");
const playerNameDisplay = document.getElementById("playerNameDisplay");
const playerNameInput = document.getElementById("playerName");
const startBtn1 = document.getElementById("startBtn1");
const oddBtn = document.getElementById("oddBtn");
const evenBtn = document.getElementById("evenBtn");
const guessRoundSpan = document.getElementById("guessRound");
const guessResultDiv = document.getElementById("guessResult");
const guessStreakDiv = document.getElementById("guessStreak");
const toChallengeBtn = document.getElementById("toChallengeBtn");
const challengeInfo = document.getElementById("challengeInfo");
const continentSelectDiv = document.getElementById("continentSelectDiv");
const continentSelect = document.getElementById("continentSelect");
const continentGoBtn = document.getElementById("continentGoBtn");
const challengeTimerDiv = document.getElementById("challengeTimer");
const challengeQ = document.getElementById("challengeQ");
const challengeInputs = document.getElementById("challengeInputs");
const challengeHint = document.getElementById("challengeHint");
const submitChallengeBtn = document.getElementById("submitChallengeBtn");
const challengeResult = document.getElementById("challengeResult");
const nextChallengeBtn = document.getElementById("nextChallengeBtn");
const finalScoreDiv = document.getElementById("finalScore");
const playAgainBtn = document.getElementById("playAgainBtn");

// --- Utility ---
function playSound(id) {
  const audio = document.getElementById(id);
  if (audio) {
    audio.currentTime = 0;
    audio.play();
  }
}
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
function updateLeaderboard() {
  leaderboardDiv.innerHTML = "";
  const sorted = leaderboard
    .slice()
    .sort((a, b) => b.score - a.score)
    .slice(0, 5);
  sorted.forEach((entry, idx) => {
    leaderboardDiv.innerHTML += `<div class="leaderboard-row"><span>${
      idx + 1
    }. ${entry.name}</span><span>${entry.score}</span></div>`;
  });
  highScoreSpan.textContent = highScore;
}
function saveLeaderboard(name, score) {
  leaderboard.push({ name, score });
  leaderboard = leaderboard.sort((a, b) => b.score - a.score).slice(0, 10);
  localStorage.setItem(
    "guessChallengeLeaderboard",
    JSON.stringify(leaderboard)
  );
  if (score > highScore) {
    highScore = score;
    localStorage.setItem("guessChallengeHighScore", highScore);
  }
  updateLeaderboard();
}

// --- Game Logic ---
function resetGame() {
  guessRound = 1;
  guessStreak = 0;
  guessResults = [];
  challengeCountries = [];
  challengeIndex = 0;
  challengeScore = 0;
  challengeContinent = null;
  challengeCountriesPool = [];
  challengeHints = true;
  challengePoints = 2;
  challengeMaxTime = 30;
  playerNameDisplay.textContent = playerName;
  guessRoundSpan.textContent = guessRound;
  guessResultDiv.textContent = "";
  guessStreakDiv.textContent = "";
  toChallengeBtn.classList.add("hidden");
  challengeSection.classList.add("hidden");
  finalSection.classList.add("hidden");
  setupSection.classList.remove("hidden");
  guessSection.classList.add("hidden");
  updateLeaderboard();
}

function startGame() {
  playerName = playerNameInput.value.trim() || "Player";
  playerNameDisplay.textContent = playerName;
  setupSection.classList.add("hidden");
  guessSection.classList.remove("hidden");
  guessRound = 1;
  guessStreak = 0;
  guessResults = [];
  guessRoundSpan.textContent = guessRound;
  guessResultDiv.textContent = "";
  guessStreakDiv.textContent = "";
  toChallengeBtn.classList.add("hidden");
  updateLeaderboard();
}

function handleGuess(playerGuess) {
  oddBtn.disabled = true;
  evenBtn.disabled = true;
  const computerNum = Math.floor(Math.random() * 100) + 1;
  const isEven = computerNum % 2 === 0;
  const correct =
    (playerGuess === "even" && isEven) || (playerGuess === "odd" && !isEven);
  guessResults.push(correct);
  if (correct) {
    guessStreak++;
    playSound("sound-correct");
    guessResultDiv.innerHTML = `<span class="btn btn-correct px-3 py-1 rounded">Correct! Computer chose <b>${computerNum}</b> (${
      isEven ? "Even" : "Odd"
    })</span>`;
  } else {
    guessStreak = 0;
    playSound("sound-wrong");
    guessResultDiv.innerHTML = `<span class="btn btn-wrong px-3 py-1 rounded">Wrong! Computer chose <b>${computerNum}</b> (${
      isEven ? "Even" : "Odd"
    })</span>`;
  }
  guessStreakDiv.textContent = `Current Streak: ${guessStreak}`;
  setTimeout(() => {
    oddBtn.disabled = false;
    evenBtn.disabled = false;
    if (guessRound < 5) {
      guessRound++;
      guessRoundSpan.textContent = guessRound;
      guessResultDiv.textContent = "";
    } else {
      toChallengeBtn.classList.remove("hidden");
      guessResultDiv.innerHTML += `<br><span class="font-bold text-indigo-700">Proceed to the Capital & Currency Challenge!</span>`;
    }
  }, 1200);
}

function goToChallenge() {
  guessSection.classList.add("hidden");
  challengeSection.classList.remove("hidden");
  challengeCountries = [];
  challengeIndex = 0;
  challengeScore = 0;
  challengeResult.textContent = "";
  challengeHint.textContent = "";
  challengeInputs.innerHTML = "";
  challengeQ.innerHTML = "";
  challengeTimerDiv.textContent = "";
  nextChallengeBtn.classList.add("hidden");
  submitChallengeBtn.disabled = false;

  if (guessResults.length === 5 && guessResults.every(Boolean)) {
    challengeHints = true;
    challengePoints = 2;
    challengeMaxTime = 30;
    challengeInfo.innerHTML = `<span class="text-green-700 font-bold">You got a perfect streak! You get 30 seconds, hints, 2 points per answer, and can choose a continent.</span>`;
    continentSelectDiv.classList.remove("hidden");
  } else {
    challengeHints = false;
    challengePoints = 1;
    challengeMaxTime = 20;
    challengeInfo.innerHTML = `<span class="text-red-700 font-bold">No perfect streak. You get 20 seconds, no hints, 1 point per answer, and random countries.</span>`;
    continentSelectDiv.classList.add("hidden");
    challengeContinent = null;
    fetchCountriesAndStartChallenge();
  }
}

// Use countriesnow.space for capitals/currencies (no CORS issues, but limited data)
function fetchCountriesAndStartChallenge() {
  let url = "https://countriesnow.space/api/v0.1/countries/capital";
  fetch(url)
    .then((res) => res.json())
    .then((data) => {
      // This API returns {data: [{name, capital}], ...}
      // We'll use staticCountries for currency, flag, region
      let countries = data.data
        .map((c) => {
          let match = staticCountries.find(
            (s) => s.name.common.toLowerCase() === c.name.toLowerCase()
          );
          return match
            ? match
            : {
                name: { common: c.name },
                capital: [c.capital || "Unknown"],
                currencies: { CUR: { name: "Unknown" } },
                flags: { png: "" },
                region: "Unknown",
              };
        })
        .filter(
          (c) =>
            c.capital[0] !== "Unknown" &&
            c.currencies &&
            Object.values(c.currencies)[0].name !== "Unknown" &&
            c.flags.png
        );

      if (challengeHints && challengeContinent) {
        countries = countries.filter((c) => c.region === challengeContinent);
      }
      challengeCountriesPool = shuffle(
        countries.length ? countries : staticCountries
      );
      challengeCountries = challengeCountriesPool.slice(0, 3);
      challengeIndex = 0;
      showChallengeQ();
    })
    .catch(() => {
      // fallback to staticCountries
      let countries = staticCountries;
      if (challengeHints && challengeContinent) {
        countries = countries.filter((c) => c.region === challengeContinent);
      }
      challengeCountriesPool = shuffle(countries);
      challengeCountries = challengeCountriesPool.slice(0, 3);
      challengeIndex = 0;
      showChallengeQ();
    });
}

function showChallengeQ() {
  clearInterval(challengeTimer);
  challengeResult.textContent = "";
  challengeHint.textContent = "";
  challengeInputs.innerHTML = "";
  challengeQ.innerHTML = "";
  if (challengeIndex >= challengeCountries.length) {
    return endGame();
  }
  const country = challengeCountries[challengeIndex];
  challengeQ.innerHTML = `
        <div class="flex items-center gap-4 mb-2">
          <img src="${country.flags.png}" alt="Flag" class="w-12 h-8 border rounded shadow"/>
          <span class="font-bold text-indigo-700 text-lg">${country.name.common}</span>
        </div>
      `;
  challengeInputs.innerHTML = `
        <input id="capitalInput" type="text" placeholder="Capital" class="border p-2 rounded mb-2 w-full" autocomplete="off"/>
        <input id="currencyInput" type="text" placeholder="Currency" class="border p-2 rounded mb-2 w-full" autocomplete="off"/>
      `;
  if (challengeHints) {
    const capitalHint = country.capital[0].charAt(0);
    const currencyHint = Object.values(country.currencies)[0].name.charAt(0);
    challengeHint.innerHTML = `Hint: Capital starts with <b>${capitalHint}</b>, Currency starts with <b>${currencyHint}</b>`;
  }
  challengeTimeLeft = challengeMaxTime;
  challengeTimerDiv.textContent = `⏰ ${challengeTimeLeft}s`;
  challengeTimer = setInterval(() => {
    challengeTimeLeft--;
    challengeTimerDiv.textContent = `⏰ ${challengeTimeLeft}s`;
    if (challengeTimeLeft <= 0) {
      clearInterval(challengeTimer);
      submitChallenge(true);
    }
  }, 1000);
}

function submitChallenge(timeout = false) {
  clearInterval(challengeTimer);
  submitChallengeBtn.disabled = true;
  const country = challengeCountries[challengeIndex];
  const capitalInput = document.getElementById("capitalInput")
    ? document.getElementById("capitalInput").value.trim().toLowerCase()
    : "";
  const currencyInput = document.getElementById("currencyInput")
    ? document.getElementById("currencyInput").value.trim().toLowerCase()
    : "";
  const correctCapital = country.capital[0].toLowerCase();
  const correctCurrency = Object.values(
    country.currencies
  )[0].name.toLowerCase();
  let resultHTML = "";

  if (!timeout) {
    if (capitalInput === correctCapital) {
      challengeScore += challengePoints;
      resultHTML += `<div class="btn btn-correct px-2 py-1 rounded mb-1">Capital: Correct!</div>`;
      playSound("sound-correct");
    } else {
      resultHTML += `<div class="btn btn-wrong px-2 py-1 rounded mb-1">Capital: Wrong! Correct: <b>${country.capital[0]}</b></div>`;
      playSound("sound-wrong");
    }
    if (currencyInput === correctCurrency) {
      challengeScore += challengePoints;
      resultHTML += `<div class="btn btn-correct px-2 py-1 rounded mb-1">Currency: Correct!</div>`;
      playSound("sound-correct");
    } else {
      resultHTML += `<div class="btn btn-wrong px-2 py-1 rounded mb-1">Currency: Wrong! Correct: <b>${
        Object.values(country.currencies)[0].name
      }</b></div>`;
      playSound("sound-wrong");
    }
  } else {
    resultHTML += `<div class="btn btn-wrong px-2 py-1 rounded mb-1">Time's up!<br>Capital: <b>${
      country.capital[0]
    }</b>, Currency: <b>${Object.values(country.currencies)[0].name}</b></div>`;
    playSound("sound-wrong");
  }

  challengeResult.innerHTML = `
        ${resultHTML}
        <div class="mt-2 flex items-center gap-2">
          <img src="${
            country.flags.png
          }" alt="Flag" class="w-10 h-7 border rounded shadow"/>
          <span class="font-bold">${country.name.common}</span>
        </div>
        <div>Capital: <b>${country.capital[0]}</b> | Currency: <b>${
    Object.values(country.currencies)[0].name
  }</b></div>
      `;
  nextChallengeBtn.classList.remove("hidden");
}

function nextChallenge() {
  challengeIndex++;
  submitChallengeBtn.disabled = false;
  nextChallengeBtn.classList.add("hidden");
  showChallengeQ();
}

function endGame() {
  challengeSection.classList.add("hidden");
  finalSection.classList.remove("hidden");
  finalScoreDiv.innerHTML = `<span class="font-bold text-indigo-700">Final Score: ${challengeScore}</span>`;
  saveLeaderboard(playerName, challengeScore);
}

// --- Event Listeners ---
startBtn1.onclick = () => {
  resetGame();
  startGame();
};
oddBtn.onclick = () => handleGuess("odd");
evenBtn.onclick = () => handleGuess("even");
toChallengeBtn.onclick = goToChallenge;
continentGoBtn.onclick = () => {
  challengeContinent = continentSelect.value;
  continentSelectDiv.classList.add("hidden");
  fetchCountriesAndStartChallenge();
};
submitChallengeBtn.onclick = () => submitChallenge(false);
nextChallengeBtn.onclick = nextChallenge;
playAgainBtn.onclick = () => {
  resetGame();
  startGame();
};

// --- Initial Setup ---
resetGame();
// Start of live-code-editor.js

const htmlEditor = document.getElementById("html");
const cssEditor = document.getElementById("css");
const jsEditor = document.getElementById("js");
const iframe = document.getElementById("preview");
const errorBox = document.getElementById("error");

function updatePreview() {
  const html = htmlEditor.value;
  const css = `<style>${cssEditor.value}</style>`;
  const js = `<script>
        try {
          ${jsEditor.value}
        } catch(e) {
          parent.document.getElementById('error').style.display = "block";
          parent.document.getElementById('error').textContent = e.message;
        }
      <\/script>`;
  const fullCode = `${html}${css}${js}`;
  const previewDocument =
    iframe.contentDocument || iframe.contentWindow.document;
  try {
    previewDocument.open();
    previewDocument.write(fullCode);
    previewDocument.close();
    errorBox.style.display = "none";
  } catch (err) {
    errorBox.style.display = "block";
    errorBox.textContent = err.message;
  }
}

function saveCode() {
  localStorage.setItem("html", htmlEditor.value);
  localStorage.setItem("css", cssEditor.value);
  localStorage.setItem("js", jsEditor.value);
  alert("Code saved!");
}

function loadSavedCode() {
  htmlEditor.value = localStorage.getItem("html") || "";
  cssEditor.value = localStorage.getItem("css") || "";
  jsEditor.value = localStorage.getItem("js") || "";
}

function resetCode() {
  if (confirm("Are you sure you want to reset all code?")) {
    htmlEditor.value = "";
    cssEditor.value = "";
    jsEditor.value = "";
    updatePreview();
  }
}

function toggleFullscreen() {
  if (iframe.requestFullscreen) {
    iframe.requestFullscreen();
  } else if (iframe.mozRequestFullScreen) {
    iframe.mozRequestFullScreen();
  } else if (iframe.webkitRequestFullscreen) {
    iframe.webkitRequestFullscreen();
  } else if (iframe.msRequestFullscreen) {
    iframe.msRequestFullscreen();
  }
}

function downloadCode() {
  const zip = new JSZip();
  zip.file("index.html", htmlEditor.value);
  zip.file("style.css", cssEditor.value);
  zip.file("script.js", jsEditor.value);
  zip.generateAsync({ type: "blob" }).then(function (content) {
    const link = document.createElement("a");
    link.href = URL.createObjectURL(content);
    link.download = "code.zip";
    link.click();
  });
}

function loadTemplate(template) {
  if (template === "hello") {
    htmlEditor.value = "<h1>Hello, World!</h1>";
    cssEditor.value =
      "body { font-family: sans-serif; text-align: center; padding-top: 20px; }";
    jsEditor.value = "console.log('Hello World loaded');";
  } else if (template === "grid") {
    htmlEditor.value =
      "<div class='grid'>\n  <div>1</div><div>2</div><div>3</div>\n</div>";
    cssEditor.value =
      ".grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; } .grid div { background: #444; color: white; padding: 20px; text-align: center; }";
    jsEditor.value = "";
  }
  // updatePreview();
}

function toggleTheme() {
  document.body.classList.toggle("light-theme");
}

[htmlEditor, cssEditor, jsEditor].forEach((editor) => {
  editor.addEventListener("input", () => {
    // updatePreview();
    saveAutosave();
  });
});

function saveAutosave() {
  localStorage.setItem("auto_html", htmlEditor.value);
  localStorage.setItem("auto_css", cssEditor.value);
  localStorage.setItem("auto_js", jsEditor.value);
}

function loadAutosave() {
  htmlEditor.value = localStorage.getItem("auto_html") || "";
  cssEditor.value = localStorage.getItem("auto_css") || "";
  jsEditor.value = localStorage.getItem("auto_js") || "";
}

// Load autosave first, then saved code if autosave is empty
loadAutosave();
if (!htmlEditor.value && !cssEditor.value && !jsEditor.value) {
  loadSavedCode();
}
// updatePreview();

// Run code button
const runbtn = document.querySelector(".run-code");
runbtn.addEventListener("click", () => {
  updatePreview();
  // saveCode();
  // alert("Code executed and saved!");
});

// End of live-code-editor.js

    </script>
  </body>
</html>
